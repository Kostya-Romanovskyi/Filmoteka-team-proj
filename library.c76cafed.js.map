{"mappings":"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","sources":["src/js/footer-modal.js","src/js/scroll_button.js","src/js/modal.js","src/js/my-library.js"],"sourcesContent":["const refs = {\n  openModalFooter: document.querySelector('[data-modal-open]'),\n  closeModalFooter: document.querySelector('[data-modal-close]'),\n  modalFooter: document.querySelector('[data-modal-footer]'),\n  backdropFooter: document.querySelector('.backdrop-footer'),\n};\n\nrefs.openModalFooter.addEventListener('click', onOpenFooterModal);\nrefs.closeModalFooter.addEventListener('click', onCloseFooterModal);\nrefs.backdropFooter.addEventListener('click', onBackdropCloseFooterModal);\n\nfunction onOpenFooterModal() {\n  refs.modalFooter.classList.remove('is-hidden-footer');\n  window.addEventListener('keydown', onTargetKeydownFooter);\n  document.body.style.overflow = 'hidden';\n}\n\nfunction onCloseFooterModal() {\n  refs.modalFooter.classList.add('is-hidden-footer');\n  window.removeEventListener('keydown', onTargetKeydownFooter);\n  document.body.style.overflow = '';\n}\n\nfunction onBackdropCloseFooterModal(e) {\n  if (e.currentTarget === e.target) {\n    onCloseFooterModal();\n  }\n}\n\nfunction onTargetKeydownFooter(e) {\n  const ESC_KEY_CODE = 'Escape';\n  const isEscKey = e.code === ESC_KEY_CODE;\n\n  if (isEscKey) {\n    onCloseFooterModal();\n    window.removeEventListener('keydown', onTargetKeydownFooter);\n  }\n}\n","const btnUp = {\n  el: document.querySelector('.btn-up'),\n  scrolling: false,\n  show() {\n    if (\n      this.el.classList.contains('btn-up_hide') &&\n      !this.el.classList.contains('btn-up_hiding')\n    ) {\n      this.el.classList.remove('btn-up_hide');\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.remove('btn-up_hiding');\n      }, 200);\n    }\n  },\n  hide() {\n    if (\n      !this.el.classList.contains('btn-up_hide') &&\n      !this.el.classList.contains('btn-up_hiding')\n    ) {\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.add('btn-up_hide');\n        this.el.classList.remove('btn-up_hiding');\n      }, 200);\n    }\n  },\n  addEventListener() {\n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY || document.documentElement.scrollTop;\n      if (this.scrolling && scrollY > 0) {\n        return;\n      }\n      this.scrolling = false;\n      if (scrollY > 400) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    });\n    document.querySelector('.btn-up').onclick = () => {\n      this.scrolling = true;\n      this.hide();\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    };\n  },\n};\n\nbtnUp.addEventListener();\n","const openModal = document.querySelector('.movie-markup');\n\nconst modal = document.querySelector('[data-modal]');\nconst modalMarkup = document.querySelector('.modal-film');\n\nlet closeModalBtn = '';\nlet movieItem = null;\n\nopenModal.addEventListener('click', onOpenModalClick);\n\nfunction onOpenModalClick(e) {\n  e.preventDefault();\n  const movieId = e.target.closest('li').getAttribute('data-id');\n\n  if (e.target !== e.currentTarget) {\n    addMarkup(movieId);\n\n    addBtnListeners();\n\n    closeModalBtn = document.querySelector('.close-modal');\n    modal.classList.remove('is-hidden');\n    document.body.classList.add('overflow');\n    document.addEventListener('keydown', onEscClose);\n\n    closeModalBtn.addEventListener('click', onCloseModalClick);\n    modal.addEventListener('click', onBackdropClick);\n  }\n}\n\nfunction addMarkup(id) {\n  const savedSettings = localStorage.getItem('currentPage');\n  const savedGenres = localStorage.getItem('localGenres');\n  try {\n    const parsedSettings = JSON.parse(savedSettings);\n    const parsedGenres = JSON.parse(savedGenres);\n\n    movieItem = parsedSettings.result.results.filter(\n      a => a.id === Number(id)\n    )[0];\n\n    const genreId = [];\n\n    parsedGenres.map(a => {\n      if (movieItem.genre_ids.includes(a.id)) {\n        genreId.push(a.name);\n      }\n    });\n\n    const imageSrc = !movieItem.poster_path\n      ? 'https://www.theoxygenstore.com/images/source/No-image.jpg'\n      : `https://image.tmdb.org/t/p/w500${movieItem.poster_path}`;\n\n    modalMarkup.innerHTML = `<div class=\"modal-film__content\">\n      <button class=\"close-modal\" type=\"button\">\n        <svg class=\"close__icon\" width=\"14\" height=\"14\">\n          <use href=\"./images/home/close.svg#close-icon\"></use>\n        </svg>\n      </button>\n      <img\n        class=\"modal-film__poster\"\n       \n        src=\"${imageSrc}\"\n        alt=${movieItem.title}\n        width=\"240\"\n        height=\"357\"\n      />\n      <div class=\"modal-wrapper\">\n      <h2 class=\"title-film\">${movieItem.title}</h2>\n      <ul class=\"modal-film__list\">\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Vote / Votes</span>\n          <span class=\"item__content\"\n            ><span class=\"item__content--rating\">${movieItem.vote_average.toFixed(\n              1\n            )}</span> /<span\n              class=\"item__content--votes\"\n              >${movieItem.vote_count}</span\n            >\n          </span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Popularity</span>\n          <span class=\"item__content\">${movieItem.popularity.toFixed(1)}</span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Original Title</span>\n          <span class=\"item__content\">${movieItem.original_title}</span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Genre</span>\n          <span class=\"item__content\">${genreId.join(', ')}</span>\n        </li>\n      </ul>\n      <div class=\"modal-film__about\">\n        <h3 class=\"about__title\">ABOUT</h3>\n        <p class=\"about__text\">\n          ${movieItem.overview}\n        </p>\n      </div>\n      <div class=\"modal-film__buttons\">\n        <button class=\"modal_film__btn\" id=\"add_to_watched_btn\" type=\"button\" ${getIsDisabled(\n          'watched',\n          id\n        )}>add to Watched</button>\n        <button class=\"modal_film__btn\" id=\"add_to_queue_btn\" type=\"button\" ${getIsDisabled(\n          'queue',\n          id\n        )}>add to queue</button>\n      </div>\n      </div>\n    </div>`;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onCloseModalClick(e) {\n  closeModal();\n}\n\nfunction onEscClose(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.classList.remove('overflow');\n  modal.removeEventListener('click', onBackdropClick);\n  document.removeEventListener('keydown', onEscClose);\n  closeModalBtn.removeEventListener('click', onCloseModalClick);\n}\n\nfunction addBtnListeners() {\n  const addToWatchedBtn = document.querySelector('#add_to_watched_btn');\n  const addToQueueBtn = document.querySelector('#add_to_queue_btn');\n\n  addToWatchedBtn.addEventListener('click', () => {\n    addToWatchedBtn.disabled = true;\n    addFilmToList('watched', movieItem);\n  });\n  addToQueueBtn.addEventListener('click', () => {\n    addToQueueBtn.disabled = true;\n    addFilmToList('queue', movieItem);\n  });\n}\n\n/*\n    @param 'watched' | 'queue' listType\n    @param { Film } film\n*/\nfunction addFilmToList(listType, film) {\n  const storageKey = listType;\n\n  const filmList = JSON.parse(localStorage.getItem(storageKey)) || [];\n\n  filmList.push(film);\n\n  localStorage.setItem(storageKey, JSON.stringify(filmList));\n}\n\nfunction getIsDisabled(listType, filmId) {\n  const filmList = JSON.parse(localStorage.getItem(listType));\n\n  if (!filmList) {\n    return '';\n  }\n\n  const isInList = filmList.find(film => Number(filmId) === film.id);\n\n  if (isInList) {\n    return 'disabled';\n  }\n\n  return '';\n}\n","const btnWatched = document.querySelector('.js-watched');\nconst btnQueue = document.querySelector('.js-queue');\n\nrenderLocalWatchedMovies();\n\nbtnQueue.addEventListener('click', renderLocalQueueMovies);\nbtnWatched.addEventListener('click', renderLocalWatchedMovies);\n\nfunction renderLocalWatchedMovies() {\n  const markupContainer = document.querySelector('.movie-markup');\n  const genres = JSON.parse(localStorage.getItem('watched'));\n  console.log(genres);\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = `\n  //       <div class=\"\">\n  //         <h1 class=\"\">You haven't watched the movies yet</h1>\n  //         <p class=\"\">Go to the main page to select a movie</p>\n  //         <a class=\"\" href=\"./index.html\">Home page</a>\n  //       </div>`;\n  //     return;\n  //   }\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = '';\n  //     return;\n  //   }\n  markupCard(markupContainer, genres);\n}\n\nfunction renderLocalQueueMovies() {\n  const markupContainer = document.querySelector('.movie-markup');\n  const genres = JSON.parse(localStorage.getItem('queue'));\n  console.log(genres);\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = `\n  //       <div class=\"\">\n  //         <h1 class=\"\">You haven't watched the movies yet</h1>\n  //         <p class=\"\">Go to the main page to select a movie</p>\n  //         <a class=\"\" href=\"./index.html\">Home page</a>\n  //       </div>`;\n  //     return;\n  //   }\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = '';\n  //     return;\n  //   }\n\n  markupCard(markupContainer, genres);\n}\n\nfunction markupCard(markupContainer, genres) {\n  markupContainer.innerHTML = genres\n    .map(movie => {\n      // заглушка для відсутньої картинки\n      const imageSrc = !movie.poster_path\n        ? 'https://image.tmdb.org/t/p/w500'\n        : `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n\n      const cardGenres = genres\n        .filter(genre => {\n          if (movie.genre_ids.includes(genre.id)) {\n            return genre.name;\n          }\n        })\n        .map(genre => genre.name)\n        .join(', ');\n\n      return `\n          <li class=\"card__item\" data-id=${movie.id}>\n            <a class=\"card__link\" href=\"\">\n              <img class=\"card__img\" src=\"${imageSrc}\" alt=\"${movie.title}\">\n              <div>\n                <p class=\"card__title\">${movie.title}</p>\n                <div class=\"card__container\">\n                  <p class=\"card__genres\"\n                  ${movie.genre_ids.length ? '' : 'hidden'}>${cardGenres} | </p>\n                  <p class=\"card__year\" ${\n                    movie.release_date.length ? '' : 'hidden'\n                  }> ${parseInt(movie.release_date) ?? ''}</p>\n                </div>\n              </div>\n            </a>\n          </li> `;\n    })\n    .join('');\n}\n"],"names":["$4e12c0f0297ad96a$var$refs","openModalFooter","document","querySelector","closeModalFooter","modalFooter","backdropFooter","$4e12c0f0297ad96a$var$onCloseFooterModal","classList","add","window","removeEventListener","$4e12c0f0297ad96a$var$onTargetKeydownFooter","body","style","overflow","e","code","addEventListener","remove","currentTarget","target","el","scrolling","show","this","contains","setTimeout","hide","scrollY","documentElement","scrollTop","onclick","scrollTo","top","left","behavior","$8a7e756c566dd1ea$var$openModal","$8a7e756c566dd1ea$var$modal","$8a7e756c566dd1ea$var$modalMarkup","$8a7e756c566dd1ea$var$closeModalBtn","$8a7e756c566dd1ea$var$movieItem","$8a7e756c566dd1ea$var$onCloseModalClick","$8a7e756c566dd1ea$var$closeModal","$8a7e756c566dd1ea$var$onEscClose","key","$8a7e756c566dd1ea$var$onBackdropClick","event","$8a7e756c566dd1ea$var$addFilmToList","listType","film","storageKey","filmList","JSON","parse","localStorage","getItem","push","setItem","stringify","$8a7e756c566dd1ea$var$getIsDisabled","filmId","find","Number","id","preventDefault","movieId","closest","getAttribute","savedSettings","savedGenres","parsedSettings","parsedGenres","result","results","filter","a","genreId","map","genre_ids","includes","name","imageSrc","poster_path","innerHTML","title","vote_average","toFixed","vote_count","popularity","original_title","join","overview","err","console","log","$8a7e756c566dd1ea$var$addMarkup","addToWatchedBtn","addToQueueBtn","disabled","$8a7e756c566dd1ea$var$addBtnListeners","$085d2f9f3e302aeb$var$btnWatched","$085d2f9f3e302aeb$var$btnQueue","$085d2f9f3e302aeb$var$renderLocalWatchedMovies","markupContainer","genres","$085d2f9f3e302aeb$var$markupCard","movie","cardGenres","genre","length","release_date","parseInt"],"version":3,"file":"library.c76cafed.js.map"}