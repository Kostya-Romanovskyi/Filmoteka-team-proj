let e=[];const t=document.querySelector(".search-form"),n=document.querySelector(".message"),s=document.querySelector(".movie-markup"),i=document.querySelector(".loader-container");function a(t){s.innerHTML=t.map((t=>{const n=t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://image.tmdb.org/t/p/w500",s=e.reduce(((e,n)=>t.genre_ids.includes(n.id)?(console.log(e),e+n.name+" "):e),"");var i;return`\n        <a class="card__link" href="">\n        <li class="card__item" data-id=${t.id}>\n        <img class="card__img" src="${n}" alt="${t.title}">\n        <div>\n        <p class="card__title">${t.title}</p>\n        <div class="card__container">\n        <p class="card__genres">${s}</p>\n        <p class="card__year">${null!==(i=parseInt(t.release_date))&&void 0!==i?i:""}</p>\n        </div>\n        </div>\n        </li>\n        </a>`})).join("")}t.addEventListener("submit",(function(e){e.preventDefault();const s=t.elements.searchQuery.value;if(console.log(t.elements),!s)return;i.hidden=!1,(async()=>{const e=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=63240915768e2fa639cf91287e69284e&query=${s}&page=1`);return await e.json()})().then((e=>{if(!e.total_results)throw n.textContent="Search result not successful. Enter the correct movie name and",new Error("Search result not successful. Enter the correct movie name and");localStorage.setItem("currentPage",JSON.stringify({type:"serched",result:e})),a(e.results)})).catch((e=>{console.log(e)})).finally((()=>{i.hidden=!0}))})),localStorage.genres||(async()=>{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=63240915768e2fa639cf91287e69284e&language=en-US");return await e.json()})().then((e=>{console.log(typeof JSON.stringify(e.genres)),localStorage.setItem("localGenres",JSON.stringify(e.genres))})).catch((e=>{console.log(e)})),i.hidden=!1,(async()=>{const e=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=63240915768e2fa639cf91287e69284e");return await e.json()})().then((t=>{localStorage.setItem("currentPage",JSON.stringify({type:"trending",result:t})),e=JSON.parse(localStorage.getItem("localGenres")),a(t.results)})).catch((e=>{console.log(e)})).finally((()=>{i.hidden=!0}));({el:document.querySelector(".btn-up"),scrolling:!1,show(){this.el.classList.contains("btn-up_hide")&&!this.el.classList.contains("btn-up_hiding")&&(this.el.classList.remove("btn-up_hide"),this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.remove("btn-up_hiding")}),300))},hide(){this.el.classList.contains("btn-up_hide")||this.el.classList.contains("btn-up_hiding")||(this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.add("btn-up_hide"),this.el.classList.remove("btn-up_hiding")}),300))},addEventListener(){window.addEventListener("scroll",(()=>{const e=window.scrollY||document.documentElement.scrollTop;this.scrolling&&e>0||(this.scrolling=!1,e>400?this.show():this.hide())})),document.querySelector(".btn-up").onclick=()=>{this.scrolling=!0,this.hide(),window.scrollTo({top:0,left:0,behavior:"smooth"})}}}).addEventListener();const l=document.querySelector(".movie-markup"),o=document.querySelector("[data-modal]"),c=document.querySelector(".modal-film");let r="";function d(e){p()}function m(e){"Escape"===e.key&&p()}function u(e){e.target===e.currentTarget&&p()}function p(){o.classList.add("is-hidden"),document.body.classList.remove("overflow"),o.removeEventListener("click",u),document.removeEventListener("keydown",m),r.removeEventListener("click",d)}l.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest("li").getAttribute("data-id");e.target!==e.currentTarget&&(!function(e){const t=localStorage.getItem("currentPage"),n=localStorage.getItem("localGenres");try{const s=JSON.parse(t),i=JSON.parse(n),a=s.result.results.filter((t=>t.id===Number(e)))[0],l=[];i.map((e=>{a.genre_ids.includes(e.id)&&l.push(e.name)}));const o=a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"https://www.theoxygenstore.com/images/source/No-image.jpg";c.innerHTML=`<div class="modal-film__content">\n      <button class="close-modal" type="button">\n        <svg class="close__icon" width="14" height="14">\n          <use href="./images/home/close.svg#close-icon"></use>\n        </svg>\n      </button>\n      <img\n        class="modal-film__poster"\n       \n        src="${o}"\n        alt=${a.title}\n        width="240"\n        height="357"\n      />\n      <h2 class="title-film">${a.title}</h2>\n      <ul class="modal-film__list">\n        <li class="modal-film__item">\n          <span class="item__label">Vote / Votes</span>\n          <span class="item__content"\n            ><span class="item__content--rating">${a.vote_average}</span> /<span\n              class="item__content--votes"\n              >${a.vote_count}</span\n            >\n          </span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Popularity</span>\n          <span class="item__content">${a.popularity}</span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Original Title</span>\n          <span class="item__content">${a.original_title}</span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Genre</span>\n          <span class="item__content">${l.join(", ")}</span>\n        </li>\n      </ul>\n      <div class="modal-film__about">\n        <h3 class="about__title">ABOUT</h3>\n        <p class="about__text">\n          ${a.overview}\n        </p>\n      </div>\n      <div class="modal-film__buttons">\n        <button class="modal_film__btn" type="button">add to Watched</button>\n        <button class="modal_film__btn" type="button">add to queue</button>\n      </div>\n    </div>`}catch(e){console.log(e)}}(t),r=document.querySelector(".close-modal"),o.classList.remove("is-hidden"),document.body.classList.add("overflow"),document.addEventListener("keydown",m),r.addEventListener("click",d),o.addEventListener("click",u))}));
//# sourceMappingURL=library.239d99a2.js.map
