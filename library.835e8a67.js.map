{"mappings":"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","sources":["src/js/footer-modal.js","src/js/scroll_button.js","src/js/modal.js","src/js/my-library.js"],"sourcesContent":["const refs = {\n  openModalFooter: document.querySelector('[data-modal-open]'),\n  closeModalFooter: document.querySelector('[data-modal-close]'),\n  modalFooter: document.querySelector('[data-modal-footer]'),\n  backdropFooter: document.querySelector('.backdrop-footer'),\n};\n\nrefs.openModalFooter.addEventListener('click', onOpenFooterModal);\nrefs.closeModalFooter.addEventListener('click', onCloseFooterModal);\nrefs.backdropFooter.addEventListener('click', onBackdropCloseFooterModal);\n\nfunction onOpenFooterModal() {\n  refs.modalFooter.classList.remove('is-hidden-footer');\n  window.addEventListener('keydown', onTargetKeydownFooter);\n  document.body.style.overflow = 'hidden';\n}\n\nfunction onCloseFooterModal() {\n  refs.modalFooter.classList.add('is-hidden-footer');\n  window.removeEventListener('keydown', onTargetKeydownFooter);\n  document.body.style.overflow = '';\n}\n\nfunction onBackdropCloseFooterModal(e) {\n  if (e.currentTarget === e.target) {\n    onCloseFooterModal();\n  }\n}\n\nfunction onTargetKeydownFooter(e) {\n  const ESC_KEY_CODE = 'Escape';\n  const isEscKey = e.code === ESC_KEY_CODE;\n\n  if (isEscKey) {\n    onCloseFooterModal();\n    window.removeEventListener('keydown', onTargetKeydownFooter);\n  }\n}\n","const btnUp = {\n  el: document.querySelector('.btn-up'),\n  scrolling: false,\n  show() {\n    if (\n      this.el.classList.contains('btn-up_hide') &&\n      !this.el.classList.contains('btn-up_hiding')\n    ) {\n      this.el.classList.remove('btn-up_hide');\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.remove('btn-up_hiding');\n      }, 200);\n    }\n  },\n  hide() {\n    if (\n      !this.el.classList.contains('btn-up_hide') &&\n      !this.el.classList.contains('btn-up_hiding')\n    ) {\n      this.el.classList.add('btn-up_hiding');\n      window.setTimeout(() => {\n        this.el.classList.add('btn-up_hide');\n        this.el.classList.remove('btn-up_hiding');\n      }, 200);\n    }\n  },\n  addEventListener() {\n    window.addEventListener('scroll', () => {\n      const scrollY = window.scrollY || document.documentElement.scrollTop;\n      if (this.scrolling && scrollY > 0) {\n        return;\n      }\n      this.scrolling = false;\n      if (scrollY > 400) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    });\n    document.querySelector('.btn-up').onclick = () => {\n      this.scrolling = true;\n      this.hide();\n      window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    };\n  },\n};\n\nbtnUp.addEventListener();\n","const openModal = document.querySelector('.movie-markup');\n\nconst modal = document.querySelector('[data-modal]');\nconst modalMarkup = document.querySelector('.modal-film');\n\nlet closeModalBtn = '';\nlet movieItem = null;\n\nopenModal.addEventListener('click', onOpenModalClick);\n\nfunction onOpenModalClick(e) {\n  e.preventDefault();\n  const movieId = e.target.closest('li').getAttribute('data-id');\n\n  if (e.target !== e.currentTarget) {\n    addMarkup(movieId);\n\n    addBtnListeners();\n\n    closeModalBtn = document.querySelector('.close-modal');\n    modal.classList.remove('is-hidden');\n    document.body.classList.add('overflow');\n    document.addEventListener('keydown', onEscClose);\n\n    closeModalBtn.addEventListener('click', onCloseModalClick);\n    modal.addEventListener('click', onBackdropClick);\n  }\n}\n\nfunction addMarkup(id) {\n  const savedSettings = localStorage.getItem('currentPage');\n  const savedGenres = localStorage.getItem('localGenres');\n  try {\n    const parsedSettings = JSON.parse(savedSettings);\n    const parsedGenres = JSON.parse(savedGenres);\n\n    movieItem = parsedSettings.result.results.filter(\n      a => a.id === Number(id)\n    )[0];\n\n    const genreId = [];\n\n    parsedGenres.map(a => {\n      if (movieItem.genre_ids.includes(a.id)) {\n        genreId.push(a.name);\n      }\n    });\n\n    const imageSrc = !movieItem.poster_path\n      ? 'https://www.theoxygenstore.com/images/source/No-image.jpg'\n      : `https://image.tmdb.org/t/p/w500${movieItem.poster_path}`;\n\n    modalMarkup.innerHTML = `<div class=\"modal-film__content\">\n      <button class=\"close-modal\" type=\"button\">\n        <svg class=\"close__icon\" width=\"14\" height=\"14\">\n          <use href=\"./images/home/close.svg#close-icon\"></use>\n        </svg>\n      </button>\n      <img\n        class=\"modal-film__poster\"\n       \n        src=\"${imageSrc}\"\n        alt=${movieItem.title}\n        width=\"240\"\n        height=\"357\"\n      />\n      <div class=\"modal-wrapper\">\n      <h2 class=\"title-film\">${movieItem.title}</h2>\n      <ul class=\"modal-film__list\">\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Vote / Votes</span>\n          <span class=\"item__content\"\n            ><span class=\"item__content--rating\">${movieItem.vote_average.toFixed(\n              1\n            )}</span> /<span\n              class=\"item__content--votes\"\n              >${movieItem.vote_count}</span\n            >\n          </span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Popularity</span>\n          <span class=\"item__content\">${movieItem.popularity.toFixed(1)}</span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Original Title</span>\n          <span class=\"item__content\">${movieItem.original_title}</span>\n        </li>\n        <li class=\"modal-film__item\">\n          <span class=\"item__label\">Genre</span>\n          <span class=\"item__content\">${genreId.join(', ')}</span>\n        </li>\n      </ul>\n      <div class=\"modal-film__about\">\n        <h3 class=\"about__title\">ABOUT</h3>\n        <p class=\"about__text\">\n          ${movieItem.overview}\n        </p>\n      </div>\n      <div class=\"modal-film__buttons\">\n        <button class=\"modal_film__btn\" id=\"add_to_watched_btn\" type=\"button\" ${getIsDisabled(\n          'watched',\n          id\n        )}>add to Watched</button>\n        <button class=\"modal_film__btn\" id=\"add_to_queue_btn\" type=\"button\" ${getIsDisabled(\n          'queue',\n          id\n        )}>add to queue</button>\n      </div>\n      </div>\n    </div>`;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onCloseModalClick(e) {\n  closeModal();\n}\n\nfunction onEscClose(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.classList.remove('overflow');\n  modal.removeEventListener('click', onBackdropClick);\n  document.removeEventListener('keydown', onEscClose);\n  closeModalBtn.removeEventListener('click', onCloseModalClick);\n}\n\nfunction addBtnListeners() {\n  const addToWatchedBtn = document.querySelector('#add_to_watched_btn');\n  const addToQueueBtn = document.querySelector('#add_to_queue_btn');\n\n  addToWatchedBtn.addEventListener('click', () => {\n    addToWatchedBtn.disabled = true;\n    addFilmToList('watched', movieItem);\n  });\n  addToQueueBtn.addEventListener('click', () => {\n    addToQueueBtn.disabled = true;\n    addFilmToList('queue', movieItem);\n  });\n}\n\n/*\n    @param 'watched' | 'queue' listType\n    @param { Film } film\n*/\nfunction addFilmToList(listType, film) {\n  const storageKey = listType;\n\n  const filmList = JSON.parse(localStorage.getItem(storageKey)) || [];\n\n  filmList.push(film);\n\n  localStorage.setItem(storageKey, JSON.stringify(filmList));\n}\n\nfunction getIsDisabled(listType, filmId) {\n  const filmList = JSON.parse(localStorage.getItem(listType));\n\n  if (!filmList) {\n    return '';\n  }\n\n  const isInList = filmList.find(film => Number(filmId) === film.id);\n\n  if (isInList) {\n    return 'disabled';\n  }\n\n  return '';\n}\n","const btnWatched = document.querySelector('.js-watched');\nconst btnQueue = document.querySelector('.js-queue');\n\nrenderLocalWatchedMovies();\n\nbtnQueue.addEventListener('click', renderLocalQueueMovies);\nbtnWatched.addEventListener('click', renderLocalWatchedMovies);\n\nfunction renderLocalWatchedMovies() {\n  const markupContainer = document.querySelector('.movie-markup');\n  const genres = JSON.parse(localStorage.getItem('watched'));\n  console.log(genres);\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = `\n  //       <div class=\"\">\n  //         <h1 class=\"\">You haven't watched the movies yet</h1>\n  //         <p class=\"\">Go to the main page to select a movie</p>\n  //         <a class=\"\" href=\"./index.html\">Home page</a>\n  //       </div>`;\n  //     return;\n  //   }\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = '';\n  //     return;\n  //   }\n  markupCard(markupContainer, genres);\n}\n\nfunction renderLocalQueueMovies() {\n  const markupContainer = document.querySelector('.movie-markup');\n  const genres = JSON.parse(localStorage.getItem('queue'));\n  console.log(genres);\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = `\n  //       <div class=\"\">\n  //         <h1 class=\"\">You haven't watched the movies yet</h1>\n  //         <p class=\"\">Go to the main page to select a movie</p>\n  //         <a class=\"\" href=\"./index.html\">Home page</a>\n  //       </div>`;\n  //     return;\n  //   }\n\n  //   if (!genres) {\n  //     const noMovies = document.querySelector('.js-container-lib');\n  //     noMovies.innerHTML = '';\n  //     return;\n  //   }\n\n  markupCard(markupContainer, genres);\n}\n\nfunction markupCard(markupContainer, genres) {\n  markupContainer.innerHTML = genres\n    .map(movie => {\n      // заглушка для відсутньої картинки\n      const imageSrc = !movie.poster_path\n        ? 'https://image.tmdb.org/t/p/w500'\n        : `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n\n      const cardGenres = genres\n        .filter(genre => {\n          if (movie.genre_ids.includes(genre.id)) {\n            return genre.name;\n          }\n        })\n        .map(genre => genre.name)\n        .join(', ');\n\n      return `\n          <li class=\"card__item\" data-id=${movie.id}>\n            <a class=\"card__link\" href=\"\">\n              <img class=\"card__img\" src=\"${imageSrc}\" alt=\"${movie.title}\">\n              <div>\n                <p class=\"card__title\">${movie.title}</p>\n                <div class=\"card__container\">\n                  <p class=\"card__genres\"\n                  ${movie.genre_ids.length ? '' : 'hidden'}>${cardGenres} | </p>\n                  <p class=\"card__year\" ${\n                    movie.release_date.length ? '' : 'hidden'\n                  }> ${parseInt(movie.release_date) ?? ''}</p>\n                </div>\n              </div>\n            </a>\n          </li> `;\n    })\n    .join('');\n}\n"],"names":["$364b163d2b622c7d$var$refs","openModalFooter","document","querySelector","closeModalFooter","modalFooter","backdropFooter","$364b163d2b622c7d$var$onCloseFooterModal","classList","add","window","removeEventListener","$364b163d2b622c7d$var$onTargetKeydownFooter","body","style","overflow","e","code","addEventListener","remove","currentTarget","target","el","scrolling","show","this","contains","setTimeout","_this","hide","scrollY","documentElement","scrollTop","onclick","scrollTo","top","left","behavior","$40873ecf3c18e122$var$openModal","$40873ecf3c18e122$var$modal","$40873ecf3c18e122$var$modalMarkup","$40873ecf3c18e122$var$closeModalBtn","$40873ecf3c18e122$var$movieItem","$40873ecf3c18e122$var$onCloseModalClick","$40873ecf3c18e122$var$closeModal","$40873ecf3c18e122$var$onEscClose","key","$40873ecf3c18e122$var$onBackdropClick","event","$40873ecf3c18e122$var$addFilmToList","listType","film","storageKey","filmList","JSON","parse","localStorage","getItem","push","setItem","stringify","$40873ecf3c18e122$var$getIsDisabled","filmId","find","Number","id","preventDefault","movieId","closest","getAttribute","savedSettings","savedGenres","parsedSettings","parsedGenres","result","results","filter","a","genreId","map","genre_ids","includes","name","imageSrc","poster_path","concat","innerHTML","title","vote_average","toFixed","vote_count","popularity","original_title","join","overview","err","console","log","$40873ecf3c18e122$var$addMarkup","addToWatchedBtn","addToQueueBtn","disabled","$bb2af86579234925$var$btnWatched","$bb2af86579234925$var$btnQueue","$bb2af86579234925$var$renderLocalWatchedMovies","markupContainer","genres","$bb2af86579234925$var$markupCard","movie","ref","cardGenres","genre","length","release_date","parseInt"],"version":3,"file":"library.835e8a67.js.map"}