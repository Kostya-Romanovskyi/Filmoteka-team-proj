const e={openModalFooter:document.querySelector("[data-modal-open]"),closeModalFooter:document.querySelector("[data-modal-close]"),modalFooter:document.querySelector("[data-modal-footer]"),backdropFooter:document.querySelector(".backdrop-footer")};function t(){e.modalFooter.classList.add("is-hidden-footer"),window.removeEventListener("keydown",n),document.body.style.overflow=""}function n(e){"Escape"===e.code&&(t(),window.removeEventListener("keydown",n))}e.openModalFooter.addEventListener("click",(function(){e.modalFooter.classList.remove("is-hidden-footer"),window.addEventListener("keydown",n),document.body.style.overflow="hidden"})),e.closeModalFooter.addEventListener("click",t),e.backdropFooter.addEventListener("click",(function(e){e.currentTarget===e.target&&t()}));({el:document.querySelector(".btn-up"),scrolling:!1,show(){this.el.classList.contains("btn-up_hide")&&!this.el.classList.contains("btn-up_hiding")&&(this.el.classList.remove("btn-up_hide"),this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.remove("btn-up_hiding")}),200))},hide(){this.el.classList.contains("btn-up_hide")||this.el.classList.contains("btn-up_hiding")||(this.el.classList.add("btn-up_hiding"),window.setTimeout((()=>{this.el.classList.add("btn-up_hide"),this.el.classList.remove("btn-up_hiding")}),200))},addEventListener(){window.addEventListener("scroll",(()=>{const e=window.scrollY||document.documentElement.scrollTop;this.scrolling&&e>0||(this.scrolling=!1,e>400?this.show():this.hide())})),document.querySelector(".btn-up").onclick=()=>{this.scrolling=!0,this.hide(),window.scrollTo({top:0,left:0,behavior:"smooth"})}}}).addEventListener();const o=document.querySelector(".movie-markup"),s=document.querySelector("[data-modal]"),i=document.querySelector(".modal-film");let a="",l=null;function c(e){m()}function d(e){"Escape"===e.key&&m()}function r(e){e.target===e.currentTarget&&m()}function m(){s.classList.add("is-hidden"),document.body.classList.remove("overflow"),s.removeEventListener("click",r),document.removeEventListener("keydown",d),a.removeEventListener("click",c)}function u(e,t){const n=e,o=JSON.parse(localStorage.getItem(n))||[];o.push(t),localStorage.setItem(n,JSON.stringify(o))}function _(e,t){const n=JSON.parse(localStorage.getItem(e));if(!n)return"";return n.find((e=>Number(t)===e.id))?"disabled":""}function p(e){const t=document.querySelector(".movie-markup"),n=JSON.parse(localStorage.getItem("localGenres"));t.innerHTML=e.map((e=>{const t=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://cdn.pixabay.com/photo/2016/12/14/23/08/page-not-found-1907792_960_720.jpg",o=n.filter((t=>{if(e.genre_ids.includes(t.id))return t.name})).map((e=>e.name)).join(", ");return`\n        <li class="card__item" data-id=${e.id}>\n          <a class="card__link" href="">\n            <img class="card__img" src="${t}" alt="${e.title}">\n            <div>\n              <p class="card__title">${e.title}</p>\n              <div class="card__container">\n                <p class="card__genres"\n                ${e.genre_ids.length?"":"hidden"}>${o}</p>\n                <p class="card__year" ${e.release_date.length?"":"hidden"}> ${parseInt(e.release_date)}</p>\n              </div>\n            </div>\n          </a>\n        </li> `})).join("")}o.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest("li").getAttribute("data-id");e.target!==e.currentTarget&&(!function(e){const t=localStorage.getItem("currentPage"),n=localStorage.getItem("localGenres");try{const o=JSON.parse(t),s=JSON.parse(n);l=o.result.results.filter((t=>t.id===Number(e)))[0];const a=[];s.map((e=>{l.genre_ids.includes(e.id)&&a.push(e.name)}));const c=l.poster_path?`https://image.tmdb.org/t/p/w500${l.poster_path}`:"https://www.theoxygenstore.com/images/source/No-image.jpg";i.innerHTML=`<div class="modal-film__content">\n      <button class="close-modal" type="button">\n        <svg class="close__icon" width="14" height="14">\n          <use href="./images/home/close.svg#close-icon"></use>\n        </svg>\n      </button>\n      <img\n        class="modal-film__poster"\n       \n        src="${c}"\n        alt=${l.title}\n        width="240"\n        height="357"\n      />\n      <div class="modal-wrapper">\n      <h2 class="title-film">${l.title}</h2>\n      <ul class="modal-film__list">\n        <li class="modal-film__item">\n          <span class="item__label">Vote / Votes</span>\n          <span class="item__content"\n            ><span class="item__content--rating">${l.vote_average.toFixed(1)}</span> /<span\n              class="item__content--votes"\n              >${l.vote_count}</span\n            >\n          </span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Popularity</span>\n          <span class="item__content">${l.popularity.toFixed(1)}</span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Original Title</span>\n          <span class="item__content">${l.original_title}</span>\n        </li>\n        <li class="modal-film__item">\n          <span class="item__label">Genre</span>\n          <span class="item__content">${a.join(", ")}</span>\n        </li>\n      </ul>\n      <div class="modal-film__about">\n        <h3 class="about__title">ABOUT</h3>\n        <p class="about__text">\n          ${l.overview}\n        </p>\n      </div>\n      <div class="modal-film__buttons">\n        <button class="modal_film__btn" id="add_to_watched_btn" type="button" ${_("watched",e)}>add to Watched</button>\n        <button class="modal_film__btn" id="add_to_queue_btn" type="button" ${_("queue",e)}>add to queue</button>\n      </div>\n      </div>\n    </div>`}catch(e){console.log(e)}}(t),function(){const e=document.querySelector("#add_to_watched_btn"),t=document.querySelector("#add_to_queue_btn");e.addEventListener("click",(()=>{e.disabled=!0,u("watched",l)})),t.addEventListener("click",(()=>{t.disabled=!0,u("queue",l)}))}(),a=document.querySelector(".close-modal"),s.classList.remove("is-hidden"),document.body.classList.add("overflow"),document.addEventListener("keydown",d),a.addEventListener("click",c),s.addEventListener("click",r))}));const h=document.querySelector(".js-watched"),g=document.querySelector(".js-queue"),v=document.querySelector(".movie-markup");g.addEventListener("click",(function(){try{p(JSON.parse(localStorage.getItem("queue")))}catch(e){v.innerHTML='<p class="movie-markup__message">Queue is empty</p>'}})),h.addEventListener("click",(function(){try{p(JSON.parse(localStorage.getItem("watched")))}catch(e){console.log(e.name),v.innerHTML='<p class="movie-markup__message">Watched is empty </p>'}}));
//# sourceMappingURL=library.ab168767.js.map
